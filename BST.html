<!–– Robert Jahn. Binary Search Tree implementation.
––>

<html>
<style>
div.scroll {
    overflow: scroll;
	width: 1580px;
    height: 100px;
}
</style>

<head>
<title>Binary Search Tree</title>



</head>

<body>
	
Add a value to the tree (-1000 to 1000).
<input type="number" id="values" name="values" min="-1000" max="1000">
<input type="submit" value="Add to the tree" onclick="add()">
<input type="submit" value="Add random number to the tree" onclick="addRandom()">
<input type="submit" value="Add 10 random numbers to the tree" onclick="add10Random()">
<input type="submit" value="Inorder" onclick="Inorder()">
<input type="submit" value="Preorder" onclick="Preorder()">
<input type="submit" value="Postorder" onclick="Postorder()">

<h1 id="newValue">

</h1>

<div class="scroll" id="tree">

</div>

<canvas id="graph" width="2000" height="2000" style="border:1px solid #d3d3d3;"></canvas>



<script>

var xCoord = 780;
var yCoord = 50;
var xParent = 780;
var yParent = 50;
var xMult = 4;
var yMult = 1;

//Makeshift class definition for the BST.
class Bst {
	constructor() {
		this.root = null;
		this.output = "";
	}

	insert(num) {
		console.log(num);
		xCoord = 780;
		yCoord = 50;
		xMult = 4;
		yMult = 1;
		this.root = this.insert2(this.root, num);
	}

	insert2(node, num) {
		if (node == null) {
			node = new Node(num);
			drawNode(num);
		}
		else {
			if(num <= node.data) {
				xParent = xCoord;
				yParent = yCoord;
				xMult = xMult / 2;
				yMult++;
				xCoord = xCoord - 200*xMult;
				yCoord = yCoord + 10*yMult;
				node.left = this.insert2(node.left, num);
			}
			else {
				xParent = xCoord;
				yParent = yCoord;
				xMult = xMult / 2;
				yMult++;
				xCoord = xCoord + 200*xMult;
				yCoord = yCoord + 10*yMult;
				node.right = this.insert2(node.right, num);
			}
		}
		return node;
	}

	inorder() {
		this.output = "";
		this.inorder2(this.root);
		document.getElementById("tree").innerHTML = this.output;
	}

	inorder2(node) {
		if (node != null) {
			 this.inorder2(node.left);
			 this.output = this.output + node.data + " ";
			 this.inorder2(node.right);
		 }
	}
	
	preorder() {
		this.output = "";
		this.preorder2(this.root);
		document.getElementById("tree").innerHTML = this.output;
	}

	preorder2(node) {
		if (node != null) {
			 this.output = this.output + node.data + " ";
			 this.preorder2(node.left);
			 this.preorder2(node.right);
		 }
	}
	
	postorder() {
		this.output = "";
		this.postorder2(this.root);
		document.getElementById("tree").innerHTML = this.output;
	}

	postorder2(node) {
		if (node != null) {
			 this.postorder2(node.left);
			 this.postorder2(node.right);
			 this.output = this.output + node.data + " ";
		 }
	}
	
}

//Makeshift class definition for Node.
class Node {
	constructor(num) {
		this.data = num;
		this.left = null;
		this.right = null;
	}
}


let tree = new Bst();

function add() {
	var num = document.getElementById("values").value;
	document.getElementById("newValue").innerHTML = "Value Added: " + num;
	tree.insert(num);
	Inorder();
}

function addRandom() {
	var num = Math.floor((Math.random() * 2000) - 1000);
	document.getElementById("newValue").innerHTML = "Value Added: " + num;
	tree.insert(num);
	Inorder();
}

function add10Random() {
	document.getElementById("newValue").innerHTML = "Values Added: "
	for(i = 0; i < 10; i++) {
		var num = Math.floor((Math.random() * 2000) - 1000);
		document.getElementById("newValue").innerHTML += num + " ";
		tree.insert(num);
	}
	Inorder();
}

function Inorder() {
	tree.inorder();
}

function Preorder() {
	tree.preorder();
}

function Postorder() {
	tree.postorder();
}

function drawNode(num) {
	var graph = document.getElementById("graph");
	var context = graph.getContext("2d");
	context.beginPath();
	context.moveTo(xParent,yParent);
	context.lineTo(xCoord,yCoord);
	context.strokeStyle = "pink";
	context.stroke();
	
	context.beginPath();
	context.arc(xCoord, yCoord, 15, 0, 2*Math.PI);
	context.fillStyle = "pink";
	context.fill();
	
	context.beginPath();
	context.fillStyle = "blue";
	context.fillText(num, xCoord - 8, yCoord);
	
}

</script>



</body>

</html>